jQuery(document).ready(function(a){var b=attach.allowed_extensions.replace(" ","").split(",");a("#commentform").attr("enctype","multipart/form-data"),a("#do_uploadFile").click(function(){a("#ywar-uploadFile").click()}),a("#ywar-uploadFile").on("change",function(){a(".ywar-attachment-notice").remove();var b=this;if(attach.limit_multiple_upload>0&&b.files.length>attach.limit_multiple_upload)return a(this).closest(".upload_section").append('<p class="ywar-attachment-notice">'+attach.too_many_attachment_selected+"</p>"),void(b.value="");for(var d=document.getElementById("uploadFileList"),e=function(a,b){var c=new FileReader;c.readAsDataURL(a[b]),c.onload=function(a){document.getElementById("img_preview"+b).src=a.target.result}};d.hasChildNodes();)d.removeChild(d.firstChild);for(var f=0,g=0;g<b.files.length;g++)if(c(b.files[g])){var h=document.createElement("li");h.innerHTML='<div style="display: inline;"><img id="img_preview'+g+'" style="width: 100px; height: 100px;"></div>',e(b.files,g),d.appendChild(h)}else f++;if(f)a(this).closest(".upload_section").append('<p class="ywar-attachment-notice">'+attach.attachments_failed_validation+"</p>");else if(!d.hasChildNodes()){var h=document.createElement("li");h.innerHTML=attach.no_attachment_selected,d.appendChild(h)}});var c=function(c){var d=c.name.lastIndexOf(".")+1,e=c.name.substring(d).toLowerCase();if(a.inArray(e,b)==-1)return!1;if(attach.allowed_max_size>0){var f=c.size/1024/1024;if(f>attach.allowed_max_size)return!1}return!0};a("#commentform").submit(function(){var a=document.getElementById("ywar-uploadFile");if(attach.limit_multiple_upload>0&&a.files.length>attach.limit_multiple_upload)return!1})});